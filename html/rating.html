<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
   
    <meta charset="UTF-8">
    <meta name="theme-color">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puppy - Жаргалтай нөхөр</title>
    <meta name="description" content="Pet, гэрийн тэжээвэр амьтан, found pet, report pet, adopt pet">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500&family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;0,1000;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900;1,1000&display=swap"
        rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>


</head>

<body>


    <nav>
        <a href="index.html"> <img src="../assets/logo.png" alt="Logo"></a>
        <button class="menu-button">&#9776;</button> <!-- Burger menu button -->
        <ul class="nav-links">
            <li><a href="rating.html">Үнэлэх, санал өгөх</a></li>
            <li><a href="ad-zar.html">Зар оруулах</a></li>
            <li><a class="darkmode">Нүдэнд ээлтэй</a></li>
        </ul>
        
        <button class="signin-button"><a href="sign-in.html">Нэвтрэх</a></button>
    </nav>
<form id="reviewForm" action="submit_review.php" method="post">
    <label for="username">Username:</label><br>
    <input type="text" id="username" name="username" required><br><br>
    
    <label for="star_number">Star Rating:</label><br>
    <div class="stars" id="starRating">
        <span class="star" data-value="1">&#9733;</span>
        <span class="star" data-value="2">&#9733;</span>
        <span class="star" data-value="3">&#9733;</span>
        <span class="star" data-value="4">&#9733;</span>
        <span class="star" data-value="5">&#9733;</span>
    </div><br><br>
    
    <input type="hidden" id="selectedStar" name="star_number" value="0"> <!-- Hidden field to store selected star value -->
    
    <label for="comment">Comment:</label><br>
    <textarea id="comment" name="comment" rows="4" cols="50"></textarea><br><br>
    
    <input type="submit" value="Submit Review">
</form>
<button id="filterButton">Filter by Stars</button>
<div id="reviewsContainer"></div>

<div id="reviewsContainer"></div>

<script>
    // filter button
document.getElementById('filterButton').addEventListener('click', function() {
    // sorting parameter heseg
    fetchReviews('sort_by_stars');
});

//
function fetchReviews(sortBy = '') {
    let url = 'fetch_reviews.php';
    
    // zaasan bol erembeleh
    if (sortBy !== '') {
        url += '?sort=' + sortBy;
    }

    fetch(url)
        .then(response => response.text())
        .then(data => {
            document.getElementById('reviewsContainer').innerHTML = data;
        })
        .catch(error => console.error('Error fetching reviews:', error));
}
    // star unelgeenii heseg
    const stars = document.querySelectorAll('.star');
    const starRating = document.getElementById('starRating');
    const selectedStar = document.getElementById('selectedStar');

    stars.forEach(star => {
        star.addEventListener('mouseover', () => {
            highlightStars(star.dataset.value);
        });

        star.addEventListener('click', () => {
            selectedStar.value = star.dataset.value;
            highlightStars(star.dataset.value);
        });

        star.addEventListener('mouseout', () => {
            const rating = selectedStar.value;
            highlightStars(rating);
        });
    });

    function highlightStars(value) {
        stars.forEach(star => {
            if (star.dataset.value <= value) {
                star.style.color = 'gold';
            } else {
                star.style.color = 'black';
            }
        });
    }

    // Fetch hiih
    document.addEventListener('DOMContentLoaded', () => {
        fetchReviews();
    });

    function fetchReviews() {
        fetch('fetch_reviews.php')
            .then(response => response.text())
            .then(data => {
                document.getElementById('reviewsContainer').innerHTML = data;
            })
            .catch(error => console.error('Error fetching reviews:', error));
    }
</script>


    <footer>
        <div class="miniHelp">
            <section>
                <h3>HappiPawz гэж юу вэ?</h3>
                <ul>
                    <li><a href="#about.html">Тухай</a></li>
                    <li><a href="#faq.html">Түгээмэл асуултууд</a></li>
                    <li><a href="#help.html">Туслах</a></li>
                </ul>
            </section>
            <section>
                <h3>Харилцагч байгууллагууд</h3>
                <ul>
                    <li><a href="#">Дэмжигч</a></li>
                    <li><a href="#">Асрах үйлчилгээ</a></li>
                    <li><a href="#">Амьтны хэрэгслийн дэлгүүр</a></li>
                    <li><a href="#">Эмнэлэг</a></li>
                </ul>
            </section>
            <section>
                <h3>Бидэнтэй холбогдох</h3>
                <address>Хаяг: doloremque laudantium, to</address>
                <p>Холбоо барих: 9999-9999</p>
            </section>
        </div>
        <div class="contactLogo">
            <a href="facebook.com"><img src="../assets/fb.png" alt="Logo"></a>
            <a href="youtube.com"><img src="../assets/yt.png" alt="Logo"></a>
            <a href="instagram.com"><img src="../assets/ig.png" alt="Logo"></a>
        </div>
        <div class="terms">
            <p>Use of this service, website, or application constitutes acceptance of all terms listed above. © 2023, HappiPawz Inc. All rights reserved.</p>
            <p><a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a></p>
        </div>
    </footer>
    <script src="../js/darkmode.js"></script>

</body>

</html>
